<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja-JP">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="keywords" content="Simple Directmedia Layer SDL 2.0">
<link rel="top" href="index.html" title="ホーム">
<link rel="parent" href="FAQs.html" title="1つ上">
<title>FAQ: Windows</title>
</head>
<body>
<a href="index.html">目次</a> - <a href="FAQs.html">FAQ</a> - Windows
<hr>
<h1>FAQ:Windows</h1>
<h2>全般</h2>
<h3>SDLを使う</h3>
<h4>何に対応しているか?</h4>
<p>
SDL 2.0.0 はWindows XP, Vista, 7, 8に対応している.
</p>
<p>
SDLはVisual C++, Cygwin, MinGW, Dev-C++で利用できる.
</p>
<p>
最新の情報は<a href="http://hg.libsdl.org/SDL/file/default/docs/README-platforms.md">http://hg.libsdl.org/SDL/file/default/docs/README-platforms.md</a>を参照すること.
</p>
<h3>Windows 2000</h3>
<h4>Windows 2000を使っているが, SDL.dllをコピーできない!</h4>
様々な理由で, Linuxで作られたアーカイブはWindows 2000で展開すると「暗号化」属性が設定される.
プロパティウィンドウの全般タブの詳細設定から暗号化チェックを外すことができる.
そうすれば通常通りコピーできるようになる.
<h2>SDLで開発する</h2>
<h3>Windows CE</h3>
<h4>Windows CEでSDLをビルドできるか?</h4>
<p>
SDL 1.2はWindows CEには公式には対応していない. しかし, Windows CEでSDLアプリケーションをビルドし実行することに成功した人達もいる.
</p>
<p>
SDL 1.2.5以降にはWindows CE用のプロジェクトファイルとSDL 1.2のビルドの情報が含まれている.
ソースアーカイブのREADME.WinCEに詳細な情報がある.
</p>
<p>
SDL 2.0はWindows CEには対応していない.
</p>
<h3>Visual C++</h3>
<h4>Visual C++でSDLを使うには?</h4>
SDL Visual C++ 開発ライブラリのアーカイブ, またはSDLソースアーカイブに含まれる"VisualC.html"を読むこと.
<h4>Visual C++で "fatal error C1083: Cannot open include file: 'windows.h': No such file or directory" が発生する</h4>
ここに書かれているように, プラットフォームSDKをインストールする必要がある: <a href="http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/">http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/</a>
<h4>Visual C++でMSVCRT.LIBまたはLIBCとのリンクエラーが発生する</h4>
SDLはMicrosoft Visual C++ランタイムのマルチスレッド版を動的にリンクしている.
プロジェクトのプロパティで, C++タブを選択して, リストボックスの「コード生成」の設定し, ランタイムライブラリを「マルチスレッドDLL」に変更する必要がある.
全プロジェクトのアプリケーションがこのようになっていることを確認すること.
<h4>Visual C++ 5を使っているが, 次のエラーが発生する: SDL.lib : fatal error LNK1106: invalid file or disk full</h4>
これは, Visual C++ 5で最新のサービスパックに更新していない場合, SDLライブラリをリビルドすると発生する.
<h4>なぜSDL 1.2アプリケーションでVisual C++デバッガが使えないのか?</h4>
MSVCデバッガが働くようにするためには, SDL_Init()にSDL_INIT_NOPARACHUTEフラグを渡して呼ぶ必要がある.
そうしないとデバッガは例外をトレースできず, 実行箇所を示すことなども行えない.
<h4>SDLアプリケーションをデバッグするとVisual C++デバッガが毎回フリーズするのはなぜか?</h4>
サーフェイスをロックしている間, DirectXドライバはシステムをロックしている.
これを避けるため, 環境変数SDL_VIDEODRIVERにwindibを設定することでビデオドライバをGDIに設定できる.
これはビデオとマウス/キーボード入力ドライバを変更する. 性能と機能が変わるが, アプリケーションをより簡単にデバッグすることができるようになる.
<h3>gcc</h3>
<h4>WindowsのgccでSDLを使うには?</h4>
ネイティブでビルドするならばCygwinまたはMiGW, または他の環境でWindowsを対象としたクロスコンパイラでビルドすることもできる.
これらの環境を構築するためのドキュメントは<a href="http://www.libsdl.org/extras/win32/gcc.html">http://www.libsdl.org/extras/win32/gcc.html</a>にある.
環境を構築すれば, UNIXのようにアプリケーションをビルドできるようになる.
この環境でアプリケーションをビルドするための詳細はLinux FAQを参照すること.
<h3>Dev-C++</h3>
<h4>Dev-C++でSDLを使うには?</h4>
<p>
the Dev-C++のチュートリアルを参照すること: <a href="http://cone3d.gamedev.net/cgi-bin/index.pl?page=tutorials/gfxsdl/tut1">http://cone3d.gamedev.net/cgi-bin/index.pl?page=tutorials/gfxsdl/tut1</a>
問題が発生したときは, このチュートリアルの作成者に連絡してほしい.
</p>
<p>
別の段階的な説明もある: <a href="http://docs.deninet.com/sdl_on_dev_c.htm">http://docs.deninet.com/sdl_on_dev_c.htm</a>
</p>
<h4>
プロジェクトのパラメータの"console application"を選択すると, Vistaではプログラムの生成で必ずクラッシュする
</h4>
Vistaでコンパイルするときは, "console application"の代わりに"gui application"を選択すること.
<h3>MinGW/MYSYS</h3>
<h4>MinGW/MYSYSでSDLを使うには?</h4>
<a href="https://wiki.libsdl.org/SDL1.2Tutorials#Setup">MYSYS/MinGW</a>チュートリアルを参照すること.
<h3>その他</h3>
<h4>"Undefined reference to 'SDL_main'"が発生する...</h4>
<p>
main()が次のように宣言されていることを確認する:
</p>
<p>
<code>
<pre>
#include "SDL.h"

int main(int argc, char *argv[])
</pre>
</code>
</p>
<p>
Windowsアプリケーションであるが, WinMain()の代わりにmain()を使わなければならない. なぜならば, SDLはあなたのメインコードを呼ぶ前にSDLの初期化をWinMain()で行っているからである.
何らかの理由でWinMain()を使う必要があるならば, SDLが正しく動作するためにはWinMain()でどのような初期化が必要かをsrc/main/win32/SDL_main.cから見つけること.
</p>
<h4>"Undefined reference to 'WinMain@16'"が発生する</h4>
Visual C++ではSDL2main.libをリンクする必要がある.
Dev-C++を含むgcc環境では, "sdl-config --libs" の出力結果をリンクする必要がある. 通常は次のようである: -lmingw32 -lSDL2main -lSDL2 -mwindows
<h4>様々な未定義のSDL関数がある...</h4>
<p>
gccでコンパイルしているならば, コマンドラインのあなたのソースコードの後にsdl-configの出力があることを確認する: gcc -o test test.c sdl-config --cflags --libs
</p>
<p>
SDL_imageやSDL_mixerの未定義の関数がある場合は, これらのライブラリが正しくリンクされていることを確認する.
</p>
<h4>WindowsでSDL_WM_ToggleFullScreen()が動作しないのはなぜか?</h4>
<p>
フルスクリーンとウィンドウのモードを切り替えるSDL_WM_ToggleFullScreen()の動作は, アプリケーションからは透過的てある.
ディスプレイのピクセルポインタが変わらない, ディスプレイのビット深度が変わらないなどである.
これはWindowsは保障できない.
しかし, 次の方法でフルスクリーンとウィンドウモードを簡単に変えられる:
</p>
<p>
<code>
<pre>
flags ^= SDL_FULLSCREEN;
screen = SDL_SetVideoMode(..., flags);
</pre>
</code>
</p>
<h4>stdout.txtとstderr.txtを作らないようにする方法は?</h4>
<p>
「SDLを使うVisual C++プロジェクトには, SDL_nostdioがあり, 望むならばこれをビルドできるはず」
</p>
<p>
「"NO_STDIO_REDIRECT"を定義しSDLを再コンパイルすれば, この問題は解決すると思う」(Bill Kendrickによる回答)
</p>
<h2>SDL Wikiへのリンク</h2>
<a href="https://wiki.libsdl.org/FAQWindows">FAQ: Windows - SDL Wiki</a>
<hr>
</body>
</html>
